<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Problemas de Arquímedes</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script src="../js/bootstrap/bootstrap.bundle.min.js" defer></script>
</head>
<body>
    <header>
        <nav class="navbar navbar-dark bg-dark navbar-expand-md">
            <div class="container-fluid">
                <a class="navbar-brand d-flex align-items-center" href="../index.html">
                    <img src="../img/logo.png" alt="logo" height="63" class="ms-2">
                    <h2 style="font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif; margin-left: 8px;">PhysicLabs</h2>
                </a>
    
                <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
    
                <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Menú</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3 nav-underline">
                            <li class="nav-item me-3">
                                <a class="nav-link text-secondary" href="../index.html">Inicio</a>
                            </li>
                            <li class="nav-item me-3">
                                <a class="nav-link text-secondary" href="temas.html">Temas</a>
                            </li>
                            <li class="nav-item me-3">
                                <a class="nav-link text-secondary" href="conversiones.html">Conversiones</a>
                            </li>
                            <li class="nav-item me-3">
                                <a class="nav-link text-secondary" href="definiciones.html">Definiciones</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    
    <main>
        <div class="container">
            <h1 class="text-center text-black mt-5" style="font-weight: bold;">Principio de Arquímedes</h1>
            <form id="formularioDatos" class="text-center mt-5">
                <!-- Selección de incógnita -->
                <label for="incognita" class="form-label mb-2">Selecciona el dato que deseas calcular:</label>
                <div class="row justify-content-center">
                    <div class="col-10 col-md-auto mb-2">
                        <select name="incognita" id="incognita" class="form-select" required>
                            <option value="" disabled selected>Selecciona una opción</option>
                            <option value="W">Peso (W)</option>
                            <option value="E">Empuje (E)</option>
                            <option value="V">Volumen (V)</option>
                            <option value="p">Densidad (ρ)</option>
                            <option value="PA">Peso Aparente (PA)</option>
                            <option value="m">Masa (m)</option>
                            <option value="T">Tensión (T)</option>
                        </select>
                    </div>
                </div>
                <br>

                <!-- Selección de datos proporcionados -->
                <label for="datos" class="form-label mb-2">Selecciona los datos con los que cuentas:</label>
                <div>
                    <div class="form-check form-switch row d-flex align-items-center justify-content-center">
                        <div class="col-4 col-sm-4 col-lg-2 d-flex justify-content-center align-items-center">
                            <input class="form-check-input datosOb" type="checkbox" value="W" name="datosOb" id="peso">
                            <label class="form-check-label" for="peso">Peso (W)</label>
                        </div> 
                        <div class="col-4 col-sm-4 col-lg-2 d-flex justify-content-center align-items-center">
                            <input class="form-check-input datosOb" type="checkbox" value="E" name="datosOb" id="empuje">
                            <label class="form-check-label" for="empuje">Empuje (E)</label>
                        </div> 
                        <div class="col-4 col-sm-4 col-lg-2 d-flex justify-content-center align-items-center">
                            <input class="form-check-input datosOb" type="checkbox" value="p" name="datosOb" id="densidad">
                            <label class="form-check-label" for="densidad">Densidad (ρ)</label>
                        </div>
                        <div class="col-4 col-sm-4 col-lg-2 d-flex justify-content-center align-items-center">
                            <input class="form-check-input datosOb" type="checkbox" value="V" name="datosOb" id="volumen">
                            <label class="form-check-label" for="volumen">Volumen (V)</label>
                        </div>
                        <div class="col-4 col-sm-4 col-lg-2 d-flex justify-content-center align-items-center">
                            <input class="form-check-input datosOb" type="checkbox" value="m" name="datosOb" id="masa">
                            <label class="form-check-label" for="masa">Masa (m)</label>
                        </div>
                        <div class="col-4 col-sm-4 col-lg-2 d-flex justify-content-center align-items-center">
                            <input class="form-check-input datosOb" type="checkbox" value="PA" name="datosOb" id="pesoAparente">
                            <label class="form-check-label" for="pesoAparente">Peso Aparente (PA)</label>
                        </div>
                        <div class="col-4 col-sm-4 col-lg-2 d-flex justify-content-center align-items-center">
                            <input class="form-check-input datosOb" type="checkbox" value="T" name="datosOb" id="tension">
                            <label class="form-check-label" for="tension">Tensión (T)</label>
                        </div>
                    </div>  
                    <button type="button" class="btn btn-primary mt-3" id="verificarOb">Verificar Checkboxes</button>
                </div>
                <br>

                <!-- Campos para ingresar datos -->
                <div id="inputFields" class="container">
                    <div id="pesoInput" style="display: none;">
                        <label for="valorPeso" class="form-label">Peso (W) [N]:</label>
                        <input type="number" name="valorPeso" id="valorPeso" class="form-control text-center datosInput" placeholder="Ejemplo: 9.81" step="0.000001">
                    </div>
                    <div id="empujeInput" style="display: none;">
                        <label for="valorEmpuje" class="form-label">Empuje (E) [N]:</label>
                        <input type="number" name="valorEmpuje" id="valorEmpuje" class="form-control text-center datosInput" placeholder="Ejemplo: 0.123" step="0.000001">
                    </div>
                    <div id="densidadInput" style="display: none;">
                        <label for="valorDensidad" class="form-label">Densidad (ρ) [kg/m³]:</label>
                        <input type="number" name="valorDensidad" id="valorDensidad" class="form-control text-center datosInput" placeholder="Ejemplo: 1000" step="0.000001">
                    </div>
                    <div id="volumenInput" style="display: none;">
                        <label for="valorVolumen" class="form-label">Volumen (V) [m³]:</label>
                        <input type="number" name="valorVolumen" id="valorVolumen" class="form-control text-center datosInput" placeholder="Ejemplo: 0.0001" step="0.000001">
                    </div>
                    <div id="masaInput" style="display: none;">
                        <label for="valorMasa" class="form-label">Masa (m) [kg]:</label>
                        <input type="number" name="valorMasa" id="valorMasa" class="form-control text-center datosInput" placeholder="Ejemplo: 5.67" step="0.000001">
                    </div>
                    <div id="pesoAparenteInput" style="display: none;">
                        <label for="valorPesoAparente" class="form-label">Peso Aparente (PA) [N]:</label>
                        <input type="number" name="valorPesoAparente" id="valorPesoAparente" class="form-control text-center datosInput" placeholder="Ejemplo: 8.7" step="0.000001">
                    </div>
                    <div id="tensionInput" style="display: none;">
                        <label for="valorTension" class="form-label">Tensión (T) [N]:</label>
                        <input type="number" name="valorTension" id="valorTension" class="form-control text-center datosInput" placeholder="Ejemplo: 6.54" step="0.000001">
                    </div>
                </div>
                <br>

                <!-- Botón de envío -->
                <div class="container">
                    <div class="row d-flex align-items-center justify-content-center">
                        <div class="col-6 col-md-auto text-center">
                            <input type="submit" name="Enviar" class="form-control mt-2" id="botonEnviar" disabled>
                        </div>
                    </div>
                </div>
            </form>

            <!-- Zona para mostrar resultados -->
            <div id="resultadoFinal" class="container mt-4" style="display: none;">
                <h3 class="text-center">Resultados</h3>
                <div id="tablaDatos"></div>
            </div>
        </div>
    </main>

    <script>
        const gravedad = 9.8; // Aceleración gravitacional

        const inputFields = {
            W: "pesoInput",
            E: "empujeInput",
            p: "densidadInput",
            V: "volumenInput",
            m: "masaInput",
            PA: "pesoAparenteInput",
            T: "tensionInput"
        };

        document.getElementById("verificarOb").addEventListener("click", () => {
            Object.values(inputFields).forEach(id => {
                const inputDiv = document.getElementById(id);
                if (inputDiv) inputDiv.style.display = "none";
            });

            document.querySelectorAll('input[name="datosOb"]:checked').forEach((checkbox) => {
                const fieldId = inputFields[checkbox.value];
                if (fieldId) {
                    document.getElementById(fieldId).style.display = "block";
                }
            });

            verificarCamposCompletos();
        });

        function verificarCamposCompletos() {
            const todosLlenos = Array.from(document.querySelectorAll(".datosInput")).every((input) => {
                return input.offsetParent === null || input.value.trim() !== "";
            });
            document.getElementById("botonEnviar").disabled = !todosLlenos;
        }

        document.querySelectorAll(".datosInput").forEach((input) => {
            input.addEventListener("input", verificarCamposCompletos);
        });

        document.getElementById("formularioDatos").addEventListener("submit", function (event) {
            event.preventDefault();

            const W = parseFloat(document.getElementById("valorPeso").value || 0);
            const E = parseFloat(document.getElementById("valorEmpuje").value || 0);
            const p = parseFloat(document.getElementById("valorDensidad").value || 0);
            const V = parseFloat(document.getElementById("valorVolumen").value || 0);
            const m = parseFloat(document.getElementById("valorMasa").value || 0);
            const PA = parseFloat(document.getElementById("valorPesoAparente").value || 0);
            const T = parseFloat(document.getElementById("valorTension").value || 0);

            const derivedM = m || (W > 0 ? W / gravedad : null);
            const derivedP = p || (m > 0 && V > 0 ? m / V : null);
            const derivedV = V || (m > 0 && p > 0 ? m / p : null);
            const derivedE = E || (p > 0 && V > 0 ? p * gravedad * V : null);
            const derivedW = W || (m > 0 ? m * gravedad : null);
            const derivedPA = PA || (derivedW && derivedE ? derivedW - derivedE : null);
            const derivedT = T || (derivedW && derivedE ? derivedW - derivedE : null);

            const datosCalculados = [
                { label: "Peso (W)", valor: derivedW || "No disponible", unidad: "N" },
                { label: "Empuje (E)", valor: derivedE || "No disponible", unidad: "N" },
                { label: "Densidad (ρ)", valor: derivedP || "No disponible", unidad: "kg/m³" },
                { label: "Volumen (V)", valor: derivedV || "No disponible", unidad: "m³" },
                { label: "Masa (m)", valor: derivedM || "No disponible", unidad: "kg" },
                { label: "Peso Aparente (PA)", valor: derivedPA || "No disponible", unidad: "N" },
                { label: "Tensión (T)", valor: derivedT || "No disponible", unidad: "N" }
            ];

            const incognita = document.getElementById("incognita").value;

            let tablaHTML = `
                <table class="table table-bordered">
                    <thead class="table-dark">
                        <tr>
                            <th>Dato</th>
                            <th>Valor</th>
                            <th>Unidad</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            datosCalculados.forEach(dato => {
                const isResultado = dato.label.toLowerCase().includes(incognita.toLowerCase());
                tablaHTML += `
                    <tr class="${isResultado ? 'table-success' : ''}">
                        <td>${dato.label}</td>
                        <td>${dato.valor !== "No disponible" ? dato.valor.toFixed(6) : dato.valor}</td>
                        <td>${dato.unidad}</td>
                    </tr>
                `;
            });

            tablaHTML += `
                    </tbody>
                </table>
            `;

            document.getElementById("tablaDatos").innerHTML = tablaHTML;
            document.getElementById("resultadoFinal").style.display = "block";
        });
    </script>
</body>
</html>
